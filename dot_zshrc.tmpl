{{- if eq .chezmoi.arch "arm64" }}
eval "$(/opt/homebrew/bin/brew shellenv)"
eval "$(/opt/homebrew/bin/mise activate zsh)"
{{- else }}
eval "$(/usr/local/bin/brew shellenv)"
eval "$(/usr/local/bin/mise activate zsh)"
{{- end }}

function update() {
    brew update
    brew upgrade --greedy
    brew cleanup

    mise upgrade --bump
    
    chezmoi add ~/.config/mise/config.toml
    chezmoi git add dot_config/mise/config.toml
    chezmoi git commit -m "mise updates"
    chezmoi git push

    chezmoi update

    source ~/.zshrc
}

eval "$(starship init zsh)"
